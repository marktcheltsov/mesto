(()=>{"use strict";class e{constructor(e,t,o){this._templateSelector=o,this._name=e.name,this._link=e.link,this._handle=t}_getTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}_setEventListeners(){this._element=this._getTemplate(),this._image=this._element.querySelector(".element__image"),this._btnLike=this._element.querySelector(".element__like"),this._deleteIcon=this._element.querySelector(".element__delete-icon"),this._imgContainer=this._image.closest(".element"),this._title=this._imgContainer.querySelector(".element__title"),this._btnLike.onclick=()=>{this._btnLike.classList.toggle("element__like_active")},this._deleteIcon.onclick=()=>{this._deleteIcon.closest(".element").remove()},this._image.onclick=()=>{this._handle(this._name,this._link)}}generateCard(){return this._element=this._getTemplate(),this._setEventListeners(),this._image=this._element.querySelector(".element__image"),this._title=this._element.querySelector(".element__title"),this._title.textContent=this._name,this._image.src=this._link,this._image.alt=this._name,this._element}}const t={formSelector:"popup__form",popupInput:".popup__input",inactiveButtonClass:"popup__save-button_disabled",inputErrorClass:"popup__input_error",errorClass:"popup__error_visible",errorText:".popup__input-error-text",errorTextActive:"popup__input-error-text_active",popupInputError:"popup__input_error",popupInputContainer:".popup__input-container",popupSaveButton:".popup__save-button",popupContainer:".popup__container"};class o{constructor(e,t){this._data=e,this._form=t,this.formList=Array.from(this._form.querySelectorAll(e.popupInput)),this._btn=this._form.querySelector(this._data.popupSaveButton),this._inputTextEror=this._form.querySelector(this._data.errorText)}_showInputError(e){this._inputContainer=e.closest(this._data.popupInputContainer),this._inputTextEror=this._inputContainer.querySelector(this._data.errorText),e.classList.add(this._data.popupInputError),this._inputTextEror.classList.add(this._data.errorTextActive),this._inputTextEror.textContent=e.validationMessage}_hideInputError(e){this._inputContainer=e.closest(this._data.popupInputContainer),this._inputTextEror=this._inputContainer.querySelector(this._data.errorText),e.classList.remove(this._data.popupInputError),this._inputTextEror.classList.remove(this._data.errorTextActive),this._inputTextEror.textContent=""}buttonSetOn(){this._btn.removeAttribute("disabled"),this._btn.classList.remove(this._data.inactiveButtonClass)}buttonSetOff(){this._btn.setAttribute("disabled",""),this._btn.classList.add(this._data.inactiveButtonClass)}formValid(){this._form.checkValidity()?this.buttonSetOn():this.buttonSetOff()}_setEventListeners(){this.formList.forEach((e=>{e.oninput=()=>{e.validity.valid?this._hideInputError(e):this._showInputError(e),this.formValid()}}))}cleanForm(){this.formList.forEach((e=>{e.classList.remove(this._data.popupInputError),e.value=null,this._inputContainer=e.closest(this._data.popupInputContainer),this._inputTextErors=this._inputContainer.querySelector(this._data.errorText),this._inputTextErors.textContent="",this._btn.removeAttribute("disabled"),this._btn.classList.remove(this._data.inactiveButtonClass)}))}validation(){this._setEventListeners()}}class s{constructor(e,t){this.name=e,this.about=t}getUserInfo(){const e={};return e.name=this.name.textContent,e.about=this.about.textContent,e}setUserInfo(e,t){if(null!==document.querySelector(".popup_opened")){const o={};o.name=e.value,o.about=t.value,this.name.textContent=o.name,this.about.textContent=o.about}}}class n extends class{constructor(e){this.popupSelector=e}handleEscClose(e){"Escape"==e.key&&(this.openedPopup=document.querySelector(".popup_opened"),this.openedPopup.classList.remove("popup_opened"))}open(){this.popupSelector.classList.add("popup_opened"),document.addEventListener("keydown",this.handleEscClose)}close(){this.popupSelector.classList.remove("popup_opened"),document.removeEventListener("keydown",this.handleEscClose)}setEventListeners(){this.popupSelector.onclick=e=>{e.target==this.popupSelector&&this.popupSelector.classList.contains("popup_opened")&&this.close()}}}{constructor(e){super(e),this.image=document.querySelector(".popup-image__img"),this.title=document.querySelector(".popup-image__title")}open(e,t){this.image.src=t,this.image.alt=e,this.title.textContent=e,super.open()}}class r extends class{constructor(e){this.popupSelector=e}handleEscClose(e){"Escape"==e.key&&(this.openedPopup=document.querySelector(".popup_opened"),this.openedPopup.classList.remove("popup_opened"))}open(){this.popupSelector.classList.add("popup_opened"),document.addEventListener("keydown",this.handleEscClose)}close(){this.popupSelector.classList.remove("popup_opened"),document.removeEventListener("keydown",this.handleEscClose)}setEventListeners(){this.popupSelector.onclick=e=>{e.target==this.popupSelector&&this.popupSelector.classList.contains("popup_opened")&&this.close()}}}{constructor(e,t){super(e),this.handle=t}setEventListeners(){this.popupSelector.onclick=e=>{e.target==this.popupSelector&&this.popupSelector.classList.contains("popup_opened")&&this.close()},this.popupSelector.addEventListener("submit",this.handle)}}const p=document.querySelector(".profile__name"),i=document.querySelector(".profile__about"),a=document.querySelector(".popup__input_type_name"),l=document.querySelector(".popup__input_type_about"),u=document.getElementById("popup-cards__input_type_name"),c=document.getElementById("popup-cards__input_type_link"),_=document.querySelector(".profile__edit-button"),d=document.querySelector(".popup-profile"),h=document.querySelector(".popup-profile__close-button"),m=document.querySelector(".popup-cards"),v=document.querySelector(".profile__card-button"),S=document.querySelector(".popup-cards__close-button"),y=document.querySelector(".popup-image"),f=(document.querySelector(".popup-image__img"),document.querySelector(".popup-image__title"),document.querySelector(".elements")),g=document.querySelector(".popup-image__close-button"),E=document.querySelector(".popup__profile-form"),b=document.querySelector(".popup__card-form"),k=new o(t,E),L=new o(t,b),C=new s(p,i),q=new n(y),x=new r(m,(t=>{t.preventDefault();const o={name:u.value,link:c.value},s=new e(o,((e,t)=>{new n(y).open(e,t)}),".template").generateCard();f.prepend(s),L.cleanForm(),L.buttonSetOff(),x.close()})),I=new r(d,(e=>{const t=new s(p,i);e.preventDefault(),t.setUserInfo(a,l),I.close()}));new class{constructor(e,t,o){this.selector=o,this.renderedItems=e,this.renderer=t}addItem(e){this.selector.append(e)}renderItems(){this.renderedItems.forEach((e=>{this.renderer(e)}))}}([{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],(t=>{const o=new e(t,((e,t)=>{new n(y).open(e,t)}),".template").generateCard();f.prepend(o)}),f).renderItems(),C.getUserInfo(),C.setUserInfo(a,l),g.onclick=()=>{q.close()},v.onclick=()=>{x.open()},S.onclick=()=>{x.close()},h.onclick=()=>{I.close()},_.onclick=()=>{I.open(),a.value=C.getUserInfo().name,l.value=C.getUserInfo().about},q.setEventListeners(),x.setEventListeners(),I.setEventListeners(),k.validation(),L.validation()})();